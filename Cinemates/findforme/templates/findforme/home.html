{% extends 'findforme/base.html' %}

{% block title %}
Cinemates
{% endblock %}

{% block links %}
{% endblock %}

{% block body %}
<div class ="container" style="margin-top: 200px;">
    <h1 class="text-center">Randomize your perfect film</h1>
    
    <form method="POST" class="d-flex align-content-center w-50 m-auto mb-5" id="searchform">
      {% csrf_token %}
      {{ form_key.as_p }}
      <select name="Categories" id="categories">
        <option value="Comedy">Comedy</option>
        <option value="Sci-fi">Sci-fi</option>
        <option value="Horror">Horror</option>
        <option value="Romance">Romance</option>
        <option value="Action">Action</option>
        <option value="Thiller">Thriller</option>
        <option value="Drama">Drama</option>
        <option value="Mystery">Mystery</option>
        <option value="Crime">Crime</option>
        <option value="Animation">Animation</option>
        <option value="Adventure">Adventure</option>
        <option value="Fantasy">Fantasy</option>
        <option value="Superhero">Superhero</option>

      </select>
      <button id="searchbutton" onclick ="SearchFilm()" class="btn btn-primary col-xs-6" type="button">Search</button>
    </form>
    
  </div>
  <div class="d-flex-center text-center mt-5">
      <ul class="list-unstyled" id="FilmList">
        {% for film,film_link in films %}
          <li><a href="/film/{{film_link}}">{{films_title}}</a></li>
        {% endfor %}
          
      </ul>
  </div>
</div>

<script>
  $('#searchform').keypress(function (e) {                                       
       if (e.which == 13) {
            e.preventDefault();
            SearchFilm()   
       }
  });

  function SearchFilm(){
    $.ajax({
      type:'POST',
      url:"search/",
      dataType: "html",
      async: true,
      data:{
        category: $("#categories").val(),
        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
      },
      success: function (data) {
        $('#FilmList').replaceWith(data);
      }
    })
  }


</script>


{% endblock %}


